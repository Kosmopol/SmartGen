<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SmartGen</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.10/marked.min.js"></script>
</head>
<body>
  <h1>Welcome to SmartGen</h1>
  <p>De nouveaux articles sont ajoutés chaque jour.</p>

  <h2>Articles Récents :</h2>
  <div id="articles"></div>

  <script>
    const folder = "content/posts/";
    const articlesContainer = document.getElementById("articles");

    // Charger et afficher les articles depuis articles.json
    async function loadArticles() {
      const response = await fetch("articles.json");
      if (response.ok) {
        const articles = await response.json();

        for (const article of articles) {
          const fileResponse = await fetch(folder + article.file);
          if (fileResponse.ok) {
            const content = await fileResponse.text();
            const articleDiv = document.createElement("div");
            articleDiv.innerHTML = `
              <h3>${article.file.replace(/^\d{4}-\d{2}-\d{2}-/, "").replace(".md", "").replace(/-/g, " ")}</h3>
              <div>${marked.parse(content)}</div>
              <hr>
            `;
            articlesContainer.appendChild(articleDiv);
          } else {
            console.error("Erreur de chargement :", article.file);
          }
        }
      } else {
        console.error("Impossible de charger articles.json");
      }
    }

    loadArticles();
  </script>
</body>
</html>
